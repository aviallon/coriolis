<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.0//EN'>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>Oroshi Documentation</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link   href="SoC.css" rel="stylesheet" type="text/css">
    <link   href="custom_tabs.css" rel="stylesheet" type="text/css">
  </head>
    <h1 id="pagetop" class="header">Oroshi - Analog Devices Layouts</h1>
    <!--
    <center class="header">
      <table class="header">
        <tr>
          <td><a href="customSummary.html">Summary</a></td>
          <td><a href="namespaces.html">Namespaces</a></td>
          <td><a href="customHierarchy.html">Class Hierarchy</a></td>
          <td><a href="annotated.html">Classes</a></td>
          <td><a href="functions.html">Member Index</a></td>
        </tr>
      </table>
    </center>
    -->
    <br>
  <body onload="javascript:toggleLevel(1)">
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>python</b></li><li class="navelem"><b>stack</b></li><li class="navelem"><a class="el" href="classpython_1_1stack_1_1Stack.html">Stack</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classpython_1_1stack_1_1Stack-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Stack Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Draw a <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> of Transistors.  
 <a href="classpython_1_1stack_1_1Stack.html#details">More...</a></p>

<p>Inherits object.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a818e80b2a75b3e0d06f9826d1c60ecab"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpython_1_1stack_1_1Stack.html#a818e80b2a75b3e0d06f9826d1c60ecab">__init__</a> (self, device, NERC, NIRC)</td></tr>
<tr class="memdesc:a818e80b2a75b3e0d06f9826d1c60ecab"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>[API]</b> Constructor  <a href="classpython_1_1stack_1_1Stack.html#a818e80b2a75b3e0d06f9826d1c60ecab">More...</a><br /></td></tr>
<tr class="separator:a818e80b2a75b3e0d06f9826d1c60ecab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa5741d1869983366b4ca96c3ae85b5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpython_1_1stack_1_1Stack.html#a4fa5741d1869983366b4ca96c3ae85b5">setWirings</a> (self, wiringSpec)</td></tr>
<tr class="memdesc:a4fa5741d1869983366b4ca96c3ae85b5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>[API]</b> Set the <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> wiring specification.  <a href="classpython_1_1stack_1_1Stack.html#a4fa5741d1869983366b4ca96c3ae85b5">More...</a><br /></td></tr>
<tr class="separator:a4fa5741d1869983366b4ca96c3ae85b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ff17e974efecc28c792db05b5d3eb0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpython_1_1stack_1_1Stack.html#a74ff17e974efecc28c792db05b5d3eb0">computeDimensions</a> (self)</td></tr>
<tr class="memdesc:a74ff17e974efecc28c792db05b5d3eb0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>[internal]</b> Compute <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> dimensions from the technological rules.  <a href="classpython_1_1stack_1_1Stack.html#a74ff17e974efecc28c792db05b5d3eb0">More...</a><br /></td></tr>
<tr class="separator:a74ff17e974efecc28c792db05b5d3eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b936db85a32775dd3739ccfdfef636d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpython_1_1stack_1_1Stack.html#a2b936db85a32775dd3739ccfdfef636d">doLayout</a> (self, bbMode)</td></tr>
<tr class="memdesc:a2b936db85a32775dd3739ccfdfef636d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>[API]</b> Draw the complete layout.  <a href="classpython_1_1stack_1_1Stack.html#a2b936db85a32775dd3739ccfdfef636d">More...</a><br /></td></tr>
<tr class="separator:a2b936db85a32775dd3739ccfdfef636d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Draw a <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> of Transistors. </p>
<p>A <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> of Transistors is a set of transistor put into a regular band and connected through their sources/drains. All share the exact same W &amp; L. The way they are connecteds defines what functionnality the <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> implement.</p>
<p>The abutment box of the stack is adjusted so that both height and width are even multiples of the track pitches, so the device can be easily placed and handled by the mixed router. The extra space needed for padding is added around the active area. Due to the presence of tracks at the top and bottom of the stack, the active area will be horizontally centered but <b>not</b> vertically.</p>
<p>The drawing of the stack is controlled through a set of variables (attributes) that allows to create it regardless of the technology. The technology is taken into account in the way those variables are computed and, obviously, their values. The following schematics details the main stack drawing variables along with their computations.</p>
<h1><a class="anchor" id="secStackLayout"></a>
Stack Layout</h1>
<h2><a class="anchor" id="secGatePitch"></a>
Gate pitch</h2>
<ul>
<li><code>self.gatePitch</code> : the pitch of transistors gates, inside the stack. It also applies to dummy transistors.</li>
</ul>
<div class="image">
<img src="gate-pitch-1.png" alt=""/>
<div class="caption">
Gate Pitch</div></div>
 <h2><a class="anchor" id="secActiveSideWidth"></a>
Active Side Width</h2>
<ul>
<li><code>self.activeSideWidth</code> : the distance between the axis of the last transistor gate (on the left or right) and the edge of the active area (<em>not</em> the diffusion area).</li>
</ul>
<div class="image">
<img src="active-side-width-1.png" alt=""/>
<div class="caption">
Active Side Width</div></div>
 <h2><a class="anchor" id="secHTrackDistance"></a>
H-Track Distance</h2>
<ul>
<li><code>self.hTrackDistance</code> : the minimal distance between either the top or bottom edge of the active area and the <em>axis</em> of the first track.</li>
</ul>
<div class="image">
<img src="htrack-distance-1.png" alt=""/>
<div class="caption">
H-Track distance</div></div>
 <h2><a class="anchor" id="secOverallVariables"></a>
BoundingBox &amp; Overall Variables</h2>
<ul>
<li><code>self.xpitches</code> : the number of vertical track pitches needed to fully enclose the active area.</li>
<li><code>self.ypitches</code> : the number of horizontal track pitches needed to fully enclose the active area.</li>
<li><code>self.activeOffsetX</code> &amp; <code>self.activeOffsetY</code> : the offsets of the active area from the bottom left corner of the abutment box.</li>
<li><code>self.diffusionWidth</code> &amp; <code>self.diffusionHeight</code> are the minimun dimensions required to fit the active area.</li>
<li><code>self.topTracksNb()</code> : the number of tracks at the top of the stack.</li>
<li><code>self.botTracksNb()</code> : the number of tracks at the bottom of the stack.</li>
</ul>
<div class="image">
<img src="stack-layout-3.png" alt=""/>
<div class="caption">
General Stack Layout</div></div>
 <h1><a class="anchor" id="secWiringSpecs"></a>
Wiring Specifications</h1>
<p><a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> routing is done through vertical <code>metal1</code> wires coming from the gates and diffusions areas and <code>metal2</code> horizontal wires that can be either above or below the active area. <code>metal2</code> wires (or track) goes through the whole stack and are assigned to one net only. A net will have at least one track above or below and may have both.</p>
<p>The connections to the diffusions areas and gates of the various fingers are specified through a list. The stack is made of a regular alternation of diffusions and gates. The list tells, for each one starting from the left, to which net and track they are connected. For a stack of <img class="formulaInl" alt="$NFs$" src="form_0.png" width="26" height="10"/> transistor fingers, the must wiring specification must contains <img class="formulaInl" alt="$ 3 + (NFs-1) \times 2$" src="form_1.png" width="101" height="14"/> elements. The list is given through one <em>string</em> with each elements separated by one or more whitespace. The syntax for <em>one</em> element is detailed <a class="el" href="classpython_1_1stack_1_1Stack.html#secAtomicWiring">Atomic Wiring Specification</a>.</p>
<p><b>Track numbering scheme</b></p>
<p>Tracks above (top) the active area and below (bottom) each have their own numbering. In both case, the count start <em>from</em> the active area. This, the top tracks will be numbered by increasing Y and the bottom tracks by <em>decreasing</em> Y.</p>
<p><b>Track/Net assignement</b></p>
<p>The track/net assignement is deduced from the atomic wiring specifications. It also allows to compute the total number of tracks needed above and below the active area.</p>
<div class="image">
<img src="wiring-spec-2.png" alt=""/>
<div class="caption">
Wiring Specification</div></div>
 <h2><a class="anchor" id="secAtomicWiring"></a>
Atomic Wiring Specification</h2>
<p>An atomic wiring specification has the same syntax for either diffusions or gates. It <em>must</em> not comprise any whitespaces. it is made of the following parts:</p><ul>
<li>The net name to connect to.</li>
<li>Whether the track is above the active area (<code>"t"</code>) or below (<code>"b"</code>). The special case (<code>"z"</code>) means that this element must be left unconnected (is such case possible?).</li>
<li>The number of the track.</li>
</ul>
<div class="image">
<img src="wiring-spec-1.png" alt=""/>
<div class="caption">
Atomic Wiring Specification</div></div>
 <h1><a class="anchor" id="secStackImplDetails"></a>
Stack Implementation Details</h1>
<p>The <code>__setattr__()</code> and <code>__getattr__</code> functions have been redefined so that the technological values (rules) can be accessed has normal attributes of the <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> class, in addition to the regular ones. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a818e80b2a75b3e0d06f9826d1c60ecab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a818e80b2a75b3e0d06f9826d1c60ecab">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>NERC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>NIRC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>[API]</b> Constructor </p>
<p>param rules The physical rule set. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The <a class="elRef" href="../hurricane/namespaceHurricane.html">Hurricane</a> AMS device into which the layout will be drawn. </td></tr>
    <tr><td class="paramname">NERC</td><td>Number of contact rows in external (first &amp; last) diffusion connectors. </td></tr>
    <tr><td class="paramname">NIRC</td><td>Number of contact rows in middle diffusion connectors. param w The <b>width</b> of every transistor of the stack (aka <em>fingers</em>). param L The <b>length</b> of every transistor. param NFs The total number of fingers (dummies includeds). param NDs The number of dummies to put on each side of the stack. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References Stack.bImplantLayer, Stack.botTracks, Stack.botWTracks, Stack.bulkNet, Stack.bulks, CapacitorStack.device, CapacitorUnit.device, VerticalRoutingTracks.device, Stack.device, Stack.dimensioned, Bulk.flags, Stack.flags, Stack.isNmos(), Stack.L, Stack.metaTnb(), Stack.metaTransistors, Stack.NDs, Stack.NERC, Stack.NFs, Stack.NIRC, Stack.tImplantLayer, Stack.topTracks, Stack.topWTracks, Stack.w, Stack.wellLayer, and Stack.wirings.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4fa5741d1869983366b4ca96c3ae85b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa5741d1869983366b4ca96c3ae85b5">&#9670;&nbsp;</a></span>setWirings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def setWirings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>wiringSpec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>[API]</b> Set the <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> wiring specification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wiringSpec</td><td>A string defining the connections for the gates and diffusion areas.</td></tr>
  </table>
  </dd>
</dl>
<p>For a comprehensive explanation of the wiring specification, refers to <a class="el" href="classpython_1_1stack_1_1Stack.html#secWiringSpecs">Wiring Specifications</a> . </p>

<p class="reference">References Stack.botTracks, Stack.botTracksNb(), Stack.botWTracks, Stack.bulkNet, <a class="el" href="classpython_1_1stack_1_1Stack.html#a74ff17e974efecc28c792db05b5d3eb0">Stack.computeDimensions()</a>, <a class="el" href="classpython_1_1capacitorrouted_1_1RoutMatchedCapacitor.html#ac6ce841e559dc495eb12a6b22cf4bdf9">RoutMatchedCapacitor.computeDimensions()</a>, CapacitorUnit.computeDimensions(), CapacitorStack.device, CapacitorUnit.device, VerticalRoutingTracks.device, Stack.device, Stack.dimensioned, Stack.eDiffMetal1Width, Bulk.flags, Stack.flags, Stack.gatePitch, Stack.getBotTrackY(), Stack.getHorizontalWidth(), Stack.horPitch, Stack.L, Stack.metal1ToGate, Stack.metaTransistors, Stack.sideActiveWidth, Stack.topTracks, Stack.topTracksNb(), Stack.topWTracks, Stack.wirings, and Stack.ypitches.</p>

</div>
</div>
<a id="a74ff17e974efecc28c792db05b5d3eb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ff17e974efecc28c792db05b5d3eb0">&#9670;&nbsp;</a></span>computeDimensions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computeDimensions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>[internal]</b> Compute <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a> dimensions from the technological rules. </p>
<p><b>Internal function.</b> Perform the computation of:</p><ul>
<li><code>self.metal1Pitch</code> </li>
<li><code>self.minWidth_metal1</code> </li>
<li><code>self.metal2Pitch</code> </li>
<li><code>self.minWidth_metal2</code> </li>
<li><code>self.gatePitch</code> </li>
<li><code>self.sideActiveWidth</code> </li>
<li><code>self.hTrackDistance</code> </li>
<li><code>self.xpitches</code> </li>
<li><code>self.ypitches</code> </li>
<li><code>self.activeOffsetX</code> </li>
<li><code>self.activeOffsetY</code> </li>
<li><code>self.boundingBox</code> </li>
</ul>

<p class="reference">References Stack.activeBox, Stack.activeOffsetX, Stack.activeOffsetY, Stack.bbHeight, Stack.bbWidth, Stack.botWTracks, Stack.boundingBox, Stack.bulks, Stack.bulkWidth, Stack.computeLayoutParasitics(), Stack.computeStressEffect(), Stack.contactDiffPitch, Stack.contactDiffSide, Stack.DGG, Stack.DGI, Stack.dimensioned, Stack.DMCG, Stack.DMCGT, Stack.DMCI, Stack.eDiffMetal1Width, Bulk.flags, Stack.flags, Stack.gatePitch, Stack.gateVia1Pitch, Stack.getBotTrackY(), Stack.getHorizontalWidth(), Stack.getLastTopTrackY(), Stack.horPitch, Stack.hTrackDistance, Stack.iDiffMetal1Width, CapacitorUnit.isVH, Stack.isVH, Stack.L, Stack.metal1ToGate, Stack.metal2Pitch, Stack.metal2TechnoPitch, Stack.metal3Pitch, Stack.metaTransistors, Stack.NERC, Stack.NFs, Stack.NIRC, Stack.sideActiveWidth, Stack.tracksNbPitch(), Stack.vBulkDistance, Stack.verPitch, Stack.w, Stack.wire1Width, Stack.wire2Width, Stack.wire3Width, Stack.wirings, Stack.xpitches, and Stack.ypitches.</p>

<p class="reference">Referenced by <a class="el" href="classpython_1_1capacitorunit_1_1CapacitorUnit.html#acd7ed0a77e223a638c85d07aed261b9f">CapacitorUnit.create()</a>, <a class="el" href="classpython_1_1stack_1_1Stack.html#a2b936db85a32775dd3739ccfdfef636d">Stack.doLayout()</a>, <a class="el" href="classpython_1_1capacitorrouted_1_1RoutMatchedCapacitor.html#a84f0757a2a026ece5364ae0cc0872ef2">RoutMatchedCapacitor.route()</a>, and <a class="el" href="classpython_1_1stack_1_1Stack.html#a4fa5741d1869983366b4ca96c3ae85b5">Stack.setWirings()</a>.</p>

</div>
</div>
<a id="a2b936db85a32775dd3739ccfdfef636d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b936db85a32775dd3739ccfdfef636d">&#9670;&nbsp;</a></span>doLayout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def doLayout </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bbMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>[API]</b> Draw the complete layout. </p>
<p>Draw the commplete layout of the <a class="el" href="classpython_1_1stack_1_1Stack.html" title="Draw a Stack of Transistors.">Stack</a>. </p>

<p class="reference">References Stack.activeOffsetX, Stack.activeOffsetY, Stack.bbWidth, Stack.botTracks, Stack.botWTracks, Stack.boundingBox, Stack.bulkNet, Stack.bulks, Stack.bulkWidth, <a class="el" href="classpython_1_1stack_1_1Stack.html#a74ff17e974efecc28c792db05b5d3eb0">Stack.computeDimensions()</a>, <a class="el" href="classpython_1_1capacitorrouted_1_1RoutMatchedCapacitor.html#ac6ce841e559dc495eb12a6b22cf4bdf9">RoutMatchedCapacitor.computeDimensions()</a>, CapacitorUnit.computeDimensions(), Stack.contactDiffPitch, CapacitorStack.device, CapacitorUnit.device, VerticalRoutingTracks.device, Stack.device, Stack.DGG, Stack.DGI, Stack.DMCG, Stack.DMCGT, Stack.DMCI, Stack.drawActive(), Stack.drawGate(), Stack.drawSourceDrain(), Stack.drawWell(), Stack.eDiffMetal1Width, Bulk.flags, Stack.flags, Stack.gatePitch, Stack.gateVia1Pitch, Stack.getBotTrackY(), Stack.getHorizontalAxis(), Stack.getHorizontalWidth(), Stack.getTopTrackY(), Stack.getWiringWidth(), Stack.horPitch, Stack.iDiffMetal1Width, Stack.isBotTrack(), CapacitorUnit.isVH, Stack.isVH, Stack.L, Stack.metal1ToGate, Stack.NERC, Stack.NFs, Stack.NIRC, Stack.sideActiveWidth, Stack.tImplantLayer, Stack.topTracks, Stack.topWTracks, Stack.w, Stack.wellLayer, Stack.wire1Width, Stack.wire2Width, Stack.wire3Width, and Stack.wirings.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>stack.py</li>
</ul>
</div><!-- contents -->
    <br>
    <hr>
    <table class="footer1">
      <tr>
        <td class="LFooter"><small>Generated by doxygen 1.9.1 on Wed Jan 10 2024</small></td>
        <td class="RFooter"><a href='#pagetop'><small>Return to top of page</small></a></td>
      </tr>
    </table>
    <table class="footer2">
      <tr>
        <td class="LFooter">Oroshi - Analog Devices Layouts</td>
        <td class="RFooter"><small>Copyright &#169; 2018-2020 Sorbonne Universite, All rights reserved</small></td>
      </tr>
    </table>
  </body>
</html>
